name: Close Actions

on:
    workflow_call:

jobs:
    close:
        name: Close issue or pull request
        runs-on: ubuntu-latest

        permissions:
            issues: write
            pull-requests: write

        steps:
            - name: Remove labels
              uses: IamPekka058/removeLabels@82c8d070189f04448d6ffe291a0e398c2a749a09 # v2
              with:
                  github_token: ${{ secrets.GITHUB_TOKEN }}
                  labels: "ðŸš§ Work in Progress"

    close-pr:
        name: Close pull request
        runs-on: ubuntu-latest
        if: github.event_name == 'pull_request'

        permissions:
            actions: write

        steps:
            - name: Delete branch caches
              uses: Friedinger/DeleteBranchCaches@d287ab284f68864bf9818d0047d9d399462d8d37 # v2.3.2
              with:
                  github-token: ${{ secrets.GITHUB_TOKEN }}
                  ref: "refs/pull/${{ github.event.pull_request.number }}/merge"
