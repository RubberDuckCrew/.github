name: Sync labels

on:
    workflow_call:
        inputs:
            additional-config:
                description: "Additional config file in the repo"
                required: false
                type: string

permissions:
    issues: write

jobs:
    labels:
        name: Sync labels
        runs-on: ubuntu-latest

        steps:
            - name: Checkout additional config
              if: ${{ inputs.additional-config }}
              uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
              with:
                  sparse-checkout: ${{ inputs.additional-config }}

            - name: Sync labels
              uses: EndBug/label-sync@52074158190acb45f3077f9099fea818aa43f97a # v2
              with:
                  config-file: |
                      https://raw.githubusercontent.com/RubberDuckCrew/.github/refs/heads/main/configs/conventions/labels.yml
                      ${{ inputs.additional-config }}
                  delete-other-labels: true
